{% extends "base.html" %}

{% block content %}
<c-card title="Welcome to the Library">
    <p class="mb-4">This is a modern Django setup with Tailwind, HTMX, and Alpine.js.</p>

    <div x-data="{ open: false }">
        <button @click="open = !open" class="bg-blue-500 text-white px-4 py-2 rounded">
            Toggle Details
        </button>
        <div x-show="open" class="mt-4 p-4 border rounded">
            Here are some details shown using Alpine.js.
        </div>
    </div>

    <ng-template name="footer">
        Powered by Django Cotton
    </ng-template>
</c-card>

<c-card title="Books" class="mt-4">
    <form method="get" class="mb-4">
        <label for="type" class="mr-2">Filter by Type:</label>
        <select name="type" id="type" onchange="this.form.submit()" class="border p-2 rounded">
            <option value="">All Types</option>
            {% for type_code, type_name in book_types %}
            <option value="{{ type_code }}" {% if selected_type == type_code %}selected{% endif %}>{{ type_name }}</option>
            {% endfor %}
        </select>
    </form>

    <ul class="list-disc pl-5">
        {% for book in books %}
        <li class="mb-2">
            <strong>{{ book.name }}</strong> ({{ book.get_book_type_display }}) - {{ book.isbn }}
        </li>
        {% empty %}
        <li>No books found.</li>
        {% endfor %}
    </ul>
</c-card>
{% endblock %}
